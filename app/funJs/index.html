<!DOCTYPE html>
<html>

<head>
    <title>js奇淫技巧</title>
    <meta charset="utf-8">
</head>

<body>
<script type="text/javascript">
	/*闭包，defineProperty*/
    var foo = function() {
        var o = {
            a: 1,
            b: 2,
            /**更多属性**/
        };
        return function(key) {
            // var tt = (o[key] = 2333);
            var tt = o[key];
            return tt;
        }
    };
    //不改变上述代码，获取对象o的所有属性
    var fooFun = foo();
    var key = Symbol();//保证key独一无二，才能在取值时追溯到原型
    Object.defineProperty(Object.prototype, key, {
    	get() {
    		console.log("正在获取对象的值");
            return this;
        },
        set(v) {
        	console.log("正在给对象赋值%s",v);
            return this;
        }
    });
    var o = fooFun(key);
    console.log(Object.keys(o));
    /*var a = {};
    Object.defineProperty(a, "a", {
    	get:function() {
    		console.log("正在获取对象的值");
            return this;
        },
        set:function(v) {
        	console.log("正在给对象赋值%s",v);
            return this;
        }
    });
    a.a = 5;
    var b = a.a;*/

    //从TOP获取sessionStorage
    var top = window.top;
    var parent = window.parent;
    console.log(top,parent);
</script>
</body>

</html>
